<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aide & Actions - Connect for Peace</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/fish_style.css">
    <style>
        .error-border {
            border: 2px solid red !important;
        }

        .radio-group.error-border {
            border: 2px solid red;
            padding: 5px;
            border-radius: 4px;
        }

        /* SweetAlert2 custom styles to appear above modals */
        .swal2-popup-custom {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
            border: 1px solid #e1e1e1 !important;
        }

        .swal2-title-custom {
            font-size: 1.1rem !important;
            font-weight: 600 !important;
        }

        .swal2-content-custom {
            font-size: 0.9rem !important;
        }
    </style>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>
        if (typeof jQuery === 'undefined') {
            console.error('jQuery failed to load! Loading fallback...');
            document.write('<script src="https://code.jquery.com/jquery-3.6.0.min.js"><\/script>');
        }
    </script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="navbar-container">
                <div class="navbar-logo">
                    <span>Connect for Peace</span>
                </div>
                <ul class="nav-menu">
                    <li><a href="#" class="nav-link">Home</a></li>
                    <li><a href="#" class="nav-link active">Actions & Aide</a></li>
                    <li><a href="#" class="nav-link">Stories</a></li>
                    <li><a href="#" class="nav-link">D√©fis</a></li>
                    <li><a href="about.html" class="nav-link">about</a></li>
                </ul>
                <div class="profile-menu">
                    <img src="https://api.placeholder.com/40/40?text=User" alt="Profile" class="profile-avatar">
                    <div class="dropdown">
                        <a href="profile" class="profile-link"><span class="material-symbols-outlined">account_circle</span> Profile</a>
                        <a href="../dashboard/index.html"><span class="material-symbols-outlined">settings</span> Settings</a>
                        <a href="#"><span class="material-symbols-outlined">logout</span> Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

   

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            
            <h1 class="hero-title">Small Acts, Big Impact </h1>
            <p class="hero-subtitle">Join a community action or lend a helping hand near you.</p>
            <spline-viewer url="https://prod.spline.design/8G96X9jnSxc0lqWr/scene.splinecode" class="global"></spline-viewer>
            <div class="hero-buttons">
                <button class="btn btn-primary create-action-btn">
                    <span class="material-symbols-outlined">add</span> Create an Action
                </button>
                <button class="btn btn-secondary create-resource-btn">
                    <span class="material-symbols-outlined">groups</span> Offer Help
                </button>
                <button class="btn btn-outline explore-nearby-btn">
                    <span class="material-symbols-outlined">near_me</span> Explore Nearby
                </button>
            </div>
      
        </div>
       
    </section>

    <!-- Filter & Search Section -->
    <section class="filter-section">
        <div class="filter-container">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search actions, resources..." class="search-input">
                <span class="material-symbols-outlined">search</span>
            </div>
            <div class="filters">
                <select id="typeFilter" class="filter-select">
                    <option value="">All Types</option>
                    <option value="action">Actions</option>
                    <option value="resource">Resources</option>
                </select>
                <select id="themeFilter" class="filter-select">
                    <option value="">All Themes</option>
                    <option value="environment">ü™¥ Environment</option>
                    <option value="education">üìö Education</option>
                    <option value="social">ü§≤ Social Help</option>
                    <option value="culture">üé® Art & Culture</option>
                </select>
                <select id="statusFilter" class="filter-select">
                    <option value="">All Status</option>
                    <option value="active">üü¢ Active</option>
                    <option value="ongoing">üü° Ongoing</option>
                    <option value="completed">‚úÖ Completed</option>
                </select>
                <button class="btn-clear" onclick="clearFilters()">Clear Filters</button>
            </div>
        </div>
    </section>

    <!-- Grid Display Section -->
    <section class="grid-section">
        <div class="container">
            <h2 class="section-title">Featured Actions & Resources</h2>
            <div class="cards-grid" id="cardsGrid">
                <!-- Cards will be generated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Details Modal -->
    <div id="detailsModal" class="modal">
        <div class="modal-content modal-large">
            <button class="modal-close" onclick="closeModal('detailsModal')">
                <span class="material-symbols-outlined">close</span>
            </button>
            <div class="modal-header">
                <img id="modalImage" src="/placeholder.svg" alt="" class="modal-image">
                <div class="modal-overlay-content">
                    <span id="modalBadge" class="badge">Action</span>
                    <h2 id="modalTitle" class="modal-title">Action Title</h2>
                    <div class="creator-info">
                        <img id="modalCreatorAvatar" src="/placeholder.svg" alt="" class="small-avatar">
                        <div>
                            <p id="modalCreatorName" class="creator-name">Creator Name</p>
                            <p id="modalCreatorBadge" class="creator-badge">Verified Organizer</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h3>About</h3>
                    <p id="modalDescription" class="description-text">Full description goes here...</p>
                </div>
                <div class="modal-section">
                    <h3>Details</h3>
                    <div class="details-grid">
                        <div class="detail-item">
                            <span class="detail-label">üìç Location</span>
                            <p id="modalLocation">Location</p>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">üìÖ Date</span>
                            <p id="modalDate">Date</p>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">üë• Participants</span>
                            <p id="modalParticipants">0 people</p>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">‚è±Ô∏è Duration</span>
                            <p id="modalDuration">Duration</p>
                        </div>
                    </div>
                </div>
                <div class="modal-section">
                    <h3>Tags</h3>
                    <div class="tags" id="modalTags"></div>
                </div>
                <div class="modal-section">
                    <h3>Participants</h3>
                    <div class="participants-list" id="participantsList"></div>
                </div>
                <div class="modal-section">
                    <h3>Feedback</h3>
                    <div class="rating-section">
                        <div class="stars" id="ratingStars">
                            <span class="star" onclick="setRating(1)">‚≠ê</span>
                            <span class="star" onclick="setRating(2)">‚≠ê</span>
                            <span class="star" onclick="setRating(3)">‚≠ê</span>
                            <span class="star" onclick="setRating(4)">‚≠ê</span>
                            <span class="star" onclick="setRating(5)">‚≠ê</span>
                        </div>
                        <textarea placeholder="Share your experience..." class="feedback-textarea"></textarea>
                        <button class="btn btn-primary" onclick="submitFeedback()">Submit Feedback</button>
                    </div>
                    <div class="comments-list" id="commentsList"></div>
                </div>
            </div>
            <div class="modal-footer">
                <div id="modalActions" style="display: flex; gap: 10px; margin-right: auto;">
                    <!-- Edit and Delete buttons will be inserted here by JavaScript -->
                </div>
                <button id="actionButton" class="btn btn-primary btn-large" onclick="toggleJoin()">Join Action</button>
                <button class="btn btn-outline" onclick="closeModal('detailsModal')">Close</button>
            </div>
        </div>
    </div>

    <!-- Create Modal -->
    <div id="createModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('createModal')">
                <span class="material-symbols-outlined">close</span>
            </button>
            <h2 class="modal-title">Create New</h2>
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('action-tab')">
                    <span class="material-symbols-outlined">eco</span> Create Action
                </button>
                <button class="tab-btn" onclick="switchTab('resource-tab')">
                    <span class="material-symbols-outlined">inventory</span> Offer/Request Resource
                </button>
            </div>

            <!-- Create Action Tab -->
            <div id="action-tab" class="tab-content active">
                <form class="create-form">
                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" id="actionTitle" placeholder="Give your action a title..." required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Category</label>
                            <select id="actionCategory" required>
                                <option>ü™¥ Environment</option>
                                <option>üìö Education</option>
                                <option>ü§≤ Social Help</option>
                                <option>üé® Art & Culture</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Theme</label>
                            <select id="actionTheme" required>
                                <option>Cleanup</option>
                                <option>Workshop</option>
                                <option>Mentoring</option>
                                <option>Volunteering</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="actionDescription" placeholder="Describe your action in detail..." rows="4" required></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Date & Time</label>
                            <input type="datetime-local" id="actionDateTime" required>
                        </div>
                        <div class="form-group">
                            <label>Duration (hours)</label>
                            <input type="number" id="actionDuration" placeholder="2" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Country</label>
                        <select id="actionCountry" name="country" required>
                            <option value="">Select Country</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Location Details</label>
                        <input type="text" id="actionLocationDetails" placeholder="City, Address, etc." required>
                    </div>
                    <input type="hidden" id="actionLat" name="latitude">
                    <input type="hidden" id="actionLng" name="longitude">
                    <input type="hidden" id="actionCountryHidden" name="country_hidden">
                    <div class="form-group">
                        <button type="button" class="btn btn-outline pick-location-btn" data-form="action">üìç Pick on Map</button>
                    </div>
                    <div class="form-group">
                        <label>Upload Image</label>
                        <div class="file-upload">
                            <span class="material-symbols-outlined">cloud_upload</span>
                            <p>Drag and drop or click to upload</p>
                            <input type="file" id="file-input" name="image" accept="image/*" />
                            <div id="num-of-files">No Files Choosen</div>
                            <ul id="files-list"></ul>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary btn-large">Create Action</button>
                </form>
            </div>

            <!-- Resource Tab -->
            <div id="resource-tab" class="tab-content">
                <form class="create-form">
                    <div class="form-group">
                        <label>Resource Name</label>
                        <input type="text" id="resourceName" placeholder="e.g., Books, Furniture..." required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Type</label>
                            <div class="radio-group">
                                <label><input type="radio" name="type" value="offer"> Offer</label>
                                <label><input type="radio" name="type" value="request"> Request</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select id="resourceCategory" required>
                                <option>Books</option>
                                <option>Furniture</option>
                                <option>Clothing</option>
                                <option>Food</option>
                                <option>Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea placeholder="Describe the resource..." rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Country</label>
                        <select id="resourceCountry" name="country" required>
                            <option value="">Select Country</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Location Details</label>
                        <input type="text" id="resourceLocationDetails" placeholder="City, Address, etc." required>
                    </div>
                    <input type="hidden" id="resourceLat" name="latitude">
                    <input type="hidden" id="resourceLng" name="longitude">
                    <input type="hidden" id="resourceCountryHidden" name="country_hidden">
                    <div class="form-group">
                        <button type="button" class="btn btn-outline pick-location-btn" data-form="resource">üìç Pick on Map</button>
                    </div>
                    <div class="form-group">
                        <label>Upload Image</label>
                        <input type="file" id="resourceImage" accept="image/*">
                    </div>
                    <button type="submit" class="btn btn-primary btn-large">Create Resource</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Image Gallery Section -->
    <section class="image-gallery">
        <div class="wrapper">
            <div class="items">
                <div class="item" tabindex="0" style="background-image: url(./Images/1.avif)"></div>
                <div class="item" tabindex="0" style="background-image: url(./Images/2.avif)"></div>
                <div class="item" tabindex="0" style="background-image: url(./Images/3.avif)"></div>
                <div class="item" tabindex="0" style="background-image: url(./Images/4.avif)"></div>
                <div class="item" tabindex="0" style="background-image: url(./Images/5.avif)"></div>
                <div class="item" tabindex="0" style="background-image: url(./Images/6.avif)"></div>
                <div class="item" tabindex="0" style="background-image: url(./Images/7.avif)"></div>
                <div class="item" tabindex="0" style="background-image: url(./Images/8.avif)"></div>
                <div class="item" tabindex="0" style="background-image: url(./Images/9.avif)"></div>
                <div class="item" tabindex="0" style="background-image: url(./Images/10.avif)"></div>
                <div class="item" tabindex="0" style="background-image: url(./Images/11.avif)"></div>
                <div class="item" tabindex="0" style="background-image: url(./Images/12.avif)"></div>
                <div class="item" tabindex="0" style="background-image: url(./Images/13.avif)"></div>
            </div>
        </div>
    </section>
    
    <!-- Map Section -->
    <section class="map-section">
        <div class="container">
            <h2 class="section-title">Community Map</h2>
            <div id="map" class="map-container"></div>
        </div>
    </section>

           <!-- Save the Fish Section -->
    <section class="save-the-fish-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Saving Lives, One Drop at a Time</h2>
                <p class="section-subtitle">Just as we save the fish by refilling its bowl, we can all take small actions to support peace, inclusion, and community aid. Every act of kindness helps keep our community thriving.(refresh page if the fish died)</p>
            </div>
            
            <div class="fish-container">
            
            <div id="fishbowl" class="fishbowl">
            <div class="fishbowl__pool"></div>
            <div class="fishbowl__background"></div>
            <div class="fishbowl__bottom"></div>
            <div class="fishbowl__decoration">
                <div class="fishbowl__seaweed fishbowl__seaweed--1"></div>
                <div class="fishbowl__seaweed fishbowl__seaweed--2"></div>
                <div class="fishbowl__seaweed fishbowl__seaweed--3"></div>
            </div>
            <div class="fishbowl__water">
                <div id="fish" class="fishbowl__fish">
                <div class="fishbowl__fish-tail"></div>
                </div>
                <div class="fishbowl__water-color"></div>
            </div>
            <div class="fishbowl__top"></div>
            <div id="tap" class="fishbowl__tap">
                <div class="fishbowl__tap-base"></div>
                <div class="fishbowl__tap-handle"></div>
                <div class="fishbowl__tap-stream"></div>
                <div class="fishbowl__tap-end"></div>
                <div class="fishbowl__tap-head"></div>
                <div class="fishbowl__tap-text">Click to refill</div>
            </div>
            </div>
            </div> <!-- Close fish-container -->
            </div> <!-- Close container -->
    </section> <!-- Close save-the-fish-section -->

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Connect for Peace. Building communities through action.</p>
        </div>
    </footer>

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script src="assets/js/countries.js"></script>
    <script src="assets/js/map.js"></script>
    <script src="assets/js/script.js"></script>
    <script src="assets/js/fish.js"></script>
    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.11.2/build/spline-viewer.js"></script>
</body>
</html>